# Appwrite Setup Guide for Bella Canto Pizzaria

This guide will help you set up your Appwrite backend for the restaurant menu management system.

## Prerequisites
- Appwrite account at https://cloud.appwrite.io
- Project ID: `698e354d002b0a79c630`
- Project Name: `bellacantopizzaria`

## Step 1: Create Database

1. Go to your Appwrite Console: https://cloud.appwrite.io/console
2. Select your project: `bellacantopizzaria`
3. Navigate to **Databases** in the left sidebar
4. Click **Create Database**
   - Database ID: `restaurant_db` (or auto-generate)
   - Database Name: `Restaurant Database`

## Step 2: Create Collections

### Collection 1: Categories

1. Click **Create Collection**
   - Collection ID: `categories` (or auto-generate)
   - Collection Name: `Categories`

2. **Attributes** (Add these fields in order):
   - `name` (String, Required, Size: 255)
     - Example: "Pizza", "Pasta", "Starters"
   - `nameEn` (String, Required, Size: 255)
     - English name for the category
   - `namePt` (String, Required, Size: 255)
     - Portuguese name for the category
   - `description` (String, Optional, Size: 500)
     - Brief description of the category
   - `imageUrl` (String, Required, Size: 500)
     - URL to category image (Unsplash or uploaded image)
   - `order` (Integer, Required, Min: 0, Max: 9999)
     - Display order (lower numbers appear first)
     - **Note**: No default value - you must enter a value when creating

3. **Indexes** (Optional but recommended):
   - Key: `order_index`, Type: `key`, Attributes: `order` (Ascending)

4. **Permissions**:
   - Role: `Any` - Read permission ✓
   - Role: `Users` - Create, Update, Delete permissions ✓

### Collection 2: Menu Items

1. Click **Create Collection**
   - Collection ID: `menu_items` (or auto-generate)
   - Collection Name: `Menu Items`

2. **Attributes** (Add these fields in order):
   - `nameEn` (String, Required, Size: 255)
     - English name of the dish
   - `namePt` (String, Required, Size: 255)
     - Portuguese name of the dish
   - `descriptionEn` (String, Optional, Size: 1000)
     - English description
   - `descriptionPt` (String, Optional, Size: 1000)
     - Portuguese description
   - `price` (String, Required, Size: 100)
     - Price as string (e.g., "8,50€" or "M: 8,50€ / R: 9,50€")
   - `categoryId` (String, Required, Size: 255)
     - References categories collection $id
   - `available` (Boolean, Optional, Default: true)
     - Toggle to show/hide item
     - **Note**: Make this OPTIONAL with default value, not required
   - `order` (Integer, Required, Min: 0, Max: 9999)
     - Display order within category
     - **Note**: No default value - you must enter a value when creating

3. **Indexes** (Recommended):
   - Key: `category_index`, Type: `key`, Attributes: `categoryId` (Ascending)
   - Key: `order_index`, Type: `key`, Attributes: `order` (Ascending)
   - Key: `available_index`, Type: `key`, Attributes: `available` (Ascending)

4. **Permissions**:
   - Role: `Any` - Read permission ✓
   - Role: `Users` - Create, Update, Delete permissions ✓

## Step 3: Create Admin User

1. Navigate to **Auth** in the left sidebar
2. Click **Create User**
   - Email: `admin@bellacanto.com` (or your preferred email)
   - Password: Create a strong password
   - Name: `Admin`

**Important**: Save these credentials securely!

## Step 4: Update Environment Variables

Add these to your `.env` file:

```env
REACT_APP_APPWRITE_ENDPOINT=https://fra.cloud.appwrite.io/v1
REACT_APP_APPWRITE_PROJECT_ID=698e354d002b0a79c630
REACT_APP_APPWRITE_PROJECT_NAME=bellacantopizzaria
REACT_APP_APPWRITE_DATABASE_ID=restaurant_db
REACT_APP_APPWRITE_CATEGORIES_COLLECTION_ID=categories
REACT_APP_APPWRITE_MENU_ITEMS_COLLECTION_ID=menu_items
```

**Note**: Replace the collection IDs with the actual IDs generated by Appwrite if you used auto-generate.

## Step 5: Populate Initial Data

After setting up collections, you need to add your categories. Here are the recommended categories:

### Categories to Create (in Admin Panel after login):

1. **Starters**
   - nameEn: "Starters"
   - namePt: "Entradas"
   - imageUrl: `https://images.unsplash.com/photo-1541529086526-db283c563270?w=800&q=80`
   - order: 10

2. **Pizza**
   - nameEn: "Pizza"
   - namePt: "Pizza"
   - imageUrl: `https://images.unsplash.com/photo-1574071318508-1cdbab80d002?w=800&q=80`
   - order: 20

3. **Pasta**
   - nameEn: "Pasta"
   - namePt: "Massa"
   - imageUrl: `https://images.unsplash.com/photo-1612874742237-6526221588e3?w=800&q=80`
   - order: 30

4. **Salads**
   - nameEn: "Salads"
   - namePt: "Saladas"
   - imageUrl: `https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=800&q=80`
   - order: 40

5. **Desserts**
   - nameEn: "Desserts"
   - namePt: "Sobremesas"
   - imageUrl: `https://images.unsplash.com/photo-1563805042-7684c019e1cb?w=800&q=80`
   - order: 50

6. **Drinks**
   - nameEn: "Drinks"
   - namePt: "Bebidas"
   - imageUrl: `https://images.unsplash.com/photo-1581006852262-e4307cf6283a?w=800&q=80`
   - order: 60

## Step 6: Test Connection

1. Start your development server: `npm start`
2. Check browser console for "✅ Appwrite connection successful"
3. Navigate to `/admin` and login with your admin credentials
4. Access admin dashboard at `/admin/dashboard`
5. Create the categories listed above
6. Start adding menu items to each category

## Data Structure Examples

### Category Example:
```json
{
  "name": "Pizza",
  "nameEn": "Pizza",
  "namePt": "Pizza",
  "description": "Authentic Italian pizzas",
  "imageUrl": "https://images.unsplash.com/photo-1574071318508-1cdbab80d002?w=800&q=80",
  "order": 20
}
```

### Menu Item Example:
```json
{
  "nameEn": "Pizza Margherita",
  "namePt": "Pizza Margherita",
  "descriptionEn": "Caputo flour, tomato sauce, mozzarella, Parmesan, Basil, and oregano",
  "descriptionPt": "Farinha Caputo, molho de tomate, mozzarella, parmesão, manjericão e orégãos",
  "price": "M: 8,50€ / R: 9,50€",
  "categoryId": "[CATEGORY_$ID_HERE]",
  "available": true,
  "order": 10
}
```

## Important Notes

1. **Category Images**: Only categories have images, not individual menu items
2. **Bilingual Support**: All content has both English (En) and Portuguese (Pt) versions
3. **Price Format**: Store prices as strings to support formats like "M: 8,50€ / R: 9,50€"
4. **Order Field**: Use increments of 10 (10, 20, 30...) to allow easy reordering
5. **Category ID**: When creating menu items, use the actual `$id` from the category document

## Troubleshooting

### Connection Issues
- Verify your Project ID is correct
- Check that your endpoint URL is correct
- Ensure you're using the correct region (fra.cloud.appwrite.io)

### Permission Errors
- Make sure you've set the correct permissions on collections
- Verify the admin user is created and can authenticate

### Collection Not Found
- Double-check collection IDs in your `.env` file
- Ensure collections are created in the correct database

## Security Notes

1. **Never commit `.env` file** - It's already in `.gitignore`
2. **Use strong passwords** for admin accounts
3. **Enable 2FA** on your Appwrite account
4. **Regularly backup** your database
5. Consider implementing **role-based access** for multiple admin users

## Next Steps

After setup:
1. Login to admin panel at `/admin`
2. Create your menu categories (Pizza, Pasta, Desserts, etc.)
3. Add menu items to each category
4. Test the public menu display

## Support

For Appwrite documentation: https://appwrite.io/docs
For issues: Check the browser console and Appwrite logs
